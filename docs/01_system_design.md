## 系统总体设计与信息架构

### 目标
为用户提供全国范围内的篮球、足球等公共或商业运动场地信息查询、导航、费用透明与条件说明，并支持点评与自助上传场地。

### 用户角色
- 访客：检索浏览场地、查看地图、阅读点评。
- 注册用户：发布点评、评分、收藏、上传新场地、认领场地、完善信息。
- 场地方/管理员：审核场地与图片、管理举报、维护基础数据、运营推荐位。

### 核心功能
- 场地检索与筛选：按城市/区县、球类（篮球/足球）、价格、室内外、开放时间、评分、是否可预约。
- 地图与导航：聚合地图标记点、支持高德/腾讯地图Web SDK，点击跳转导航App。
- 场地详情：价格、开放时间、配套（灯光、淋浴、停车）、地面材质、天气与拥挤度提示（可拓展）。
- 点评与评分：文本、图片、标签（干净、灯光好、草皮新等），敏感词与图片审核。
- 场地上传与审核流：用户提交坐标、基本信息与图片，进入审核，审核后公开。
- 账号与合规模块：手机号/微信登录、隐私合规、内容审核与举报。

### 信息架构（IA）
- 首页：城市切换、搜索框、热门分类、地图入口、精选场地卡片。
- 地图页：聚合点、筛选面板、列表-地图联动。
- 场地列表页：多维筛选、分页/无限滚动、排序（距离、评分、价格）。
- 场地详情页：图集、关键信息、费用、开放时间、设施标签、评论区、导航按钮、收藏与分享。
- 上传场地页：表单+地图拾取坐标、图片上传、预览与提交、审核状态页。
- 用户中心：我的收藏、我的点评、我上传的场地、消息与审核通知。
- 管理后台（后续）：审核队列、内容管理、推荐位、字典项维护（城市、设施标签等）。

### 技术选型（建议）
- 前端：Next.js/React + TypeScript + TailwindCSS 或 Ant Design，地图SDK（高德/腾讯），SSR以利于SEO。
- 后端：Node.js (NestJS/Express) + TypeScript；或 .NET/Java 亦可。建议 NestJS 以获得模块化与内置验证、Swagger。
- 数据库：PostgreSQL 或 MySQL；地理位置能力建议 PostGIS or MySQL 8.0 空间索引；缓存使用 Redis。
- 对象存储与CDN：阿里云OSS/腾讯云COS + CDN；图片处理支持WebP/AVIF与缩略图。
- 搜索：数据库空间索引 + 可选 Elasticsearch/OpenSearch 以支持更强的地理与关键字检索。
- 登录：手机号短信/微信登录；第三方登录对应国内合规与审核。
- 内容审核：接入阿里/腾讯内容安全API（文本/图片）；自建敏感词库。

### 架构与模块
- API 网关（REST）：认证、速率限制、API Key（对第三方）
- 用户与权限：JWT/Session、RBAC（user, moderator, admin）
- 场地模块：CRUD、空间检索（按半径/矩形/城市）、标签与设施、价格模型
- 评论模块：评分聚合、反刷与限频、防刷IP/设备指纹
- 上传与媒体：直传对象存储、回调校验、签名URL、缩略图生成
- 审核流：状态机（pending/approved/rejected）、原因与申诉
- 通知：消息站内、短信/微信模板消息（后续）
- 运营：推荐、banner、话题与挑战（可后续）

### 非功能需求
- 性能：LCP < 2.5s（核心页），地图懒加载；图片多版本与延迟加载。
- 安全：CSRF/XSS/SQL注入/鉴权绕过；对象存储私有读写+CDN鉴权。
- 可靠性：服务健康检查、灰度发布、日志追踪、错误告警。
- 合规：隐私政策、用户协议、数据跨境合规；未成年保护；内容审核留痕。

### 里程碑
1) 设计与规范 → 2) 最小可用版本（检索/地图/详情/上传/点评） → 3) 审核与风控 → 4) 性能与SEO → 5) 管理后台与运营。


