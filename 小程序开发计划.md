# 小程序开发计划

## 📋 项目概述

为运动场地平台开发微信小程序，复用现有的后端 API。

---

## 🎯 技术选型

### 推荐方案：Taro + React + TypeScript

**为什么选择 Taro？**
- ✅ 一套代码，可编译到微信/支付宝/抖音等多个小程序平台
- ✅ 使用 React + TypeScript，与现有前端技术栈一致
- ✅ 组件丰富，开发效率高
- ✅ 社区活跃，文档完善

**替代方案：uni-app**
- 也支持多端编译
- 使用 Vue 语法
- 如果团队更熟悉 Vue，可以选择

---

## 📁 项目结构建议

```
findyusports/
├── Server/api/          # 后端 API（已存在）
├── Web/webapp/          # 网页版前端（已存在）
└── MiniProgram/         # 小程序（新建）
    ├── src/
    │   ├── pages/       # 页面
    │   │   ├── index/   # 首页（场地列表）
    │   │   ├── detail/  # 场地详情
    │   │   ├── map/     # 地图页面
    │   │   └── profile/ # 个人中心
    │   ├── components/  # 组件
    │   │   ├── VenueCard/      # 场地卡片
    │   │   ├── VenueDetail/    # 场地详情组件
    │   │   ├── ImageGallery/   # 图片画廊
    │   │   └── ReviewList/     # 评价列表
    │   ├── services/    # API 服务
    │   │   └── api.ts   # API 封装
    │   ├── utils/       # 工具函数
    │   │   ├── auth.ts  # 认证相关
    │   │   └── format.ts # 格式化工具
    │   └── app.config.ts # 小程序配置
    ├── package.json
    └── tsconfig.json
```

---

## 🎨 功能清单

### 第一阶段：核心功能（MVP）

#### 1. 首页 - 场地列表
- [ ] 场地列表展示（卡片式）
- [ ] 下拉刷新
- [ ] 上拉加载更多
- [ ] 搜索功能（按城市、运动类型）
- [ ] 筛选功能（价格、室内外、设施）

#### 2. 场地详情页
- [ ] 场地基本信息展示
- [ ] 图片画廊（支持滑动查看）
- [ ] 地图位置展示
- [ ] 用户评价列表
- [ ] 写评价功能（需要登录）

#### 3. 地图页面
- [ ] 地图展示
- [ ] 场地标记点
- [ ] 点击标记查看场地信息
- [ ] 定位功能

#### 4. 个人中心
- [ ] 登录/注册
- [ ] 我的收藏（可选）
- [ ] 我的评价（可选）

### 第二阶段：增强功能

- [ ] 分享功能
- [ ] 收藏功能
- [ ] 消息通知
- [ ] 管理员功能（添加场地、上传图片）

---

## 🔌 API 对接

### 现有 API 端点

```
GET  /venues              # 获取场地列表
GET  /venues/:id          # 获取场地详情
GET  /venues/:id/images   # 获取场地图片
GET  /venues/:id/reviews  # 获取场地评价
POST /venues/:id/reviews  # 提交评价
POST /auth/login          # 登录
POST /auth/register       # 注册
```

### API 封装示例

```typescript
// services/api.ts
const API_BASE = 'https://your-backend-url.com/api'

export const getVenues = async (params: any) => {
  const query = new URLSearchParams(params).toString()
  const res = await Taro.request({
    url: `${API_BASE}/venues?${query}`,
    method: 'GET'
  })
  return res.data
}

export const getVenueDetail = async (id: string) => {
  const res = await Taro.request({
    url: `${API_BASE}/venues/${id}`,
    method: 'GET'
  })
  return res.data
}
```

---

## 📅 开发时间表

### 第 1 周：项目搭建 + 基础页面
- [ ] 安装 Taro 开发环境
- [ ] 创建项目结构
- [ ] 配置 API 服务
- [ ] 完成首页（场地列表）
- [ ] 完成场地详情页

### 第 2 周：核心功能
- [ ] 完成地图页面
- [ ] 完成个人中心
- [ ] 完成登录/注册
- [ ] 完成评价功能

### 第 3 周：优化 + 测试
- [ ] UI/UX 优化
- [ ] 性能优化
- [ ] 测试各种场景
- [ ] 修复 bug

### 第 4 周：发布准备
- [ ] 小程序审核材料准备
- [ ] 提交审核
- [ ] 根据反馈调整

---

## 🛠️ 开发步骤

### 步骤 1：安装 Taro CLI

```bash
npm install -g @tarojs/cli
```

### 步骤 2：创建项目

```bash
cd /Users/Zhuanz/Documents/findyusports
taro init MiniProgram
```

选择：
- 框架：React
- TypeScript：是
- CSS 预处理器：Sass/SCSS

### 步骤 3：配置 API 地址

在 `src/config/index.ts` 中配置后端 API 地址：

```typescript
export default {
  apiBase: 'https://your-backend-url.com/api'
}
```

### 步骤 4：开发页面

按照功能清单逐步开发各个页面。

---

## 📱 小程序配置

### app.config.ts

```typescript
export default {
  pages: [
    'pages/index/index',
    'pages/detail/detail',
    'pages/map/map',
    'pages/profile/profile'
  ],
  window: {
    backgroundTextStyle: 'light',
    navigationBarBackgroundColor: '#fff',
    navigationBarTitleText: '运动场地',
    navigationBarTextStyle: 'black'
  },
  permission: {
    'scope.userLocation': {
      desc: '你的位置信息将用于查找附近的场地'
    }
  }
}
```

---

## 🎨 UI 设计建议

### 设计原则
- 简洁清晰
- 符合微信小程序设计规范
- 与网页版保持风格一致

### 关键页面设计

#### 首页
- 顶部：搜索框 + 筛选按钮
- 中间：场地卡片列表（图片 + 名称 + 地址 + 价格）
- 底部：Tab 导航（首页、地图、我的）

#### 详情页
- 顶部：图片轮播
- 中间：场地信息（名称、地址、价格、设施等）
- 底部：评价列表 + 写评价按钮

---

## 🔐 认证方案

### 方案一：微信登录（推荐）
- 使用微信授权登录
- 获取 openid 作为用户标识
- 后端关联用户信息

### 方案二：手机号登录
- 复用现有的手机号登录
- 需要在小程序中输入手机号

---

## 📦 需要安装的依赖

```json
{
  "dependencies": {
    "@tarojs/components": "^3.x",
    "@tarojs/runtime": "^3.x",
    "@tarojs/taro": "^3.x",
    "react": "^18.0.0",
    "react-dom": "^18.0.0"
  },
  "devDependencies": {
    "@tarojs/cli": "^3.x",
    "@tarojs/webpack5-runner": "^3.x",
    "typescript": "^5.0.0"
  }
}
```

---

## 🚀 下一步行动

1. **今天**：安装 Taro，创建项目结构
2. **明天**：完成 API 封装，开发首页
3. **本周**：完成核心页面（列表、详情、地图）
4. **下周**：完成登录、评价等交互功能

---

## 📝 注意事项

1. **API 跨域**：确保后端 API 支持小程序域名
2. **图片加载**：使用 HTTPS 图片链接
3. **地图服务**：使用微信小程序地图组件
4. **审核要求**：遵守微信小程序审核规范

---

## 🎯 成功标准

- ✅ 用户可以浏览场地列表
- ✅ 用户可以查看场地详情
- ✅ 用户可以在地图上查看场地
- ✅ 用户可以登录和写评价
- ✅ 小程序通过微信审核

---

准备好了吗？我们可以开始创建项目了！

