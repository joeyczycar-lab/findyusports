# 网站无法打开 - 诊断指南

## 🔍 快速诊断

### 1. 检查本地开发服务器是否运行

**前端（端口 3000）**:
```bash
# 检查端口是否被占用
lsof -ti:3000

# 如果返回进程ID，说明前端正在运行
# 如果没有返回，说明前端未运行
```

**后端（端口 4000）**:
```bash
# 检查端口是否被占用
lsof -ti:4000

# 如果返回进程ID，说明后端正在运行
# 如果没有返回，说明后端未运行
```

### 2. 启动开发服务器

#### 方法 1: 使用启动脚本（推荐）

```bash
cd /Users/Zhuanz/Documents/findyusports
./start-dev.sh
```

#### 方法 2: 手动启动

**启动前端**:
```bash
cd Web/webapp
npm run dev
```

访问: http://localhost:3000

**启动后端**:
```bash
cd Server/api
npm run dev
```

访问: http://localhost:4000/health

### 3. 检查环境变量

确保 `Web/webapp/.env.local` 文件存在并包含：

```env
# 本地开发时使用本地后端
NEXT_PUBLIC_API_BASE=http://localhost:4000

# 或使用生产环境后端
# NEXT_PUBLIC_API_BASE=https://findyusports-production.up.railway.app

# 高德地图 Key（如果需要地图功能）
NEXT_PUBLIC_AMAP_KEY=你的高德地图Key
```

### 4. 检查后端 API 是否可访问

```bash
# 测试本地后端
curl http://localhost:4000/health

# 测试生产环境后端
curl https://findyusports-production.up.railway.app/health
```

如果返回 JSON 数据，说明后端正常。

### 5. 常见问题

#### 问题 1: "无法连接到后端服务"

**原因**: 后端未运行或地址配置错误

**解决**:
1. 检查后端是否运行: `lsof -ti:4000`
2. 检查 `.env.local` 中的 `NEXT_PUBLIC_API_BASE` 是否正确
3. 启动后端: `cd Server/api && npm run dev`

#### 问题 2: "端口已被占用"

**原因**: 另一个程序正在使用该端口

**解决**:
```bash
# 查找占用端口的进程
lsof -ti:3000  # 前端端口
lsof -ti:4000  # 后端端口

# 停止进程（替换 PID 为实际进程ID）
kill -9 PID

# 或使用其他端口
npm run dev -- -p 3001  # 前端使用 3001 端口
```

#### 问题 3: "找不到模块"

**原因**: 依赖未安装

**解决**:
```bash
# 安装前端依赖
cd Web/webapp
npm install

# 安装后端依赖
cd ../../Server/api
npm install
```

#### 问题 4: 生产环境网站打不开

**检查清单**:
- [ ] Vercel/Netlify 部署是否成功？
- [ ] 环境变量是否已配置？
- [ ] 后端 API 是否正常运行？
- [ ] 域名 DNS 是否正确配置？

**检查部署状态**:
1. 登录 Vercel/Netlify 控制台
2. 查看部署日志
3. 检查环境变量配置
4. 查看构建错误

### 6. 快速修复命令

```bash
# 停止所有 Node.js 进程（谨慎使用）
pkill -f node

# 重新安装依赖
cd Web/webapp && rm -rf node_modules && npm install
cd ../../Server/api && rm -rf node_modules && npm install

# 清理 Next.js 缓存
cd Web/webapp && rm -rf .next && npm run dev
```

## 📞 需要帮助？

如果以上方法都无法解决问题，请提供：
1. 错误信息截图
2. 浏览器控制台错误（F12）
3. 终端错误日志
4. 使用的启动方式（本地开发/生产环境）

