# 执行数据库迁移

## 问题

代码中使用了新的设施字段（`has_shower`, `has_locker`, `has_shop`），但数据库中还没有这些列。

## 解决方案

### 方案 1：执行迁移脚本（推荐）

在 Railway 的数据库服务中执行迁移脚本：

1. 在 Railway 中，点击 `Postgres` 服务
2. 点击 "Data" 标签
3. 点击 "Query" 或 "SQL Editor"
4. 执行以下 SQL：

```sql
ALTER TABLE venue ADD COLUMN IF NOT EXISTS has_shower BOOLEAN;
ALTER TABLE venue ADD COLUMN IF NOT EXISTS has_locker BOOLEAN;
ALTER TABLE venue ADD COLUMN IF NOT EXISTS has_shop BOOLEAN;
```

### 方案 2：使用代码自动处理（已实现）

代码已经修复，会自动检查这些列是否存在：
- 如果列存在，会查询和使用它们
- 如果列不存在，会跳过它们，不会报错

## 当前状态

✅ 代码已修复，即使列不存在也不会报错
✅ 可以正常加载场地数据
⚠️ 新设施字段功能需要执行迁移后才能使用

## 建议

1. 先推送代码修复（已修复）
2. 等待部署完成
3. 然后执行数据库迁移（可选，如果需要使用新设施字段）
