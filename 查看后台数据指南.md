# 查看后台数据指南

## 方法 1: 使用命令行工具（推荐）

### 查看所有数据

在 `Server/api` 目录运行：

```bash
cd Server/api
npm run view-data
```

这会显示：
- 📊 所有场地数据（名称、ID、类型、位置、价格等）
- 📊 所有用户数据
- 📊 最近10条评价数据
- 📊 最近10张图片数据
- 📈 数据统计信息

### 输出示例

```
✅ 数据库连接成功

📊 场地数据 (共 5 个):
================================================================================

1. 北京朝阳体育馆
   ID: 1
   类型: 🏀 篮球
   城市: 110000
   地址: 北京市朝阳区...
   坐标: 116.4567, 39.8765
   价格: ¥50 - ¥100/小时
   室内: 是

...

📈 数据统计:
================================================================================
   场地总数: 5
   用户总数: 3
   评价总数: 12
   图片总数: 8
   篮球场地: 3
   足球场地: 2
```

## 方法 2: 使用管理后台网页

### 访问数据统计页面

**地址**: http://localhost:3000/admin/data

**功能**:
- 查看场地总数、篮球/足球场地数量
- 查看室内/室外场地统计
- 查看收费/免费场地统计
- 查看所有场地的详细列表（表格形式）

### 访问场地列表页面

**地址**: http://localhost:3000/admin/venues

**功能**:
- 以卡片形式查看所有场地
- 支持分页浏览
- 点击场地可查看详情

## 方法 3: 直接查询数据库

### 使用 Railway 数据库

1. **登录 Railway**
   - 访问 https://railway.app
   - 进入你的项目
   - 点击 PostgreSQL 数据库服务

2. **使用 Railway 数据库查询界面**
   - 点击 "Data" 标签
   - 可以直接执行 SQL 查询

3. **使用 psql 命令行**

```bash
# 获取 DATABASE_URL（从 Railway Variables 中复制）
# 然后连接数据库
psql "你的_DATABASE_URL"

# 查询场地数据
SELECT * FROM venue ORDER BY id;

# 查询用户数据
SELECT * FROM "user" ORDER BY id;

# 查询评价数据
SELECT * FROM review ORDER BY "createdAt" DESC LIMIT 10;
```

### 使用本地数据库

如果使用本地 PostgreSQL：

```bash
# 连接本地数据库
psql -U postgres -d venues

# 或者使用环境变量中的连接信息
psql -h localhost -U postgres -d venues
```

## 方法 4: 使用 API 接口

### 获取场地列表

```bash
# 获取所有场地
curl http://localhost:4000/venues?ne=135,54&sw=73,18&pageSize=100

# 获取特定场地详情
curl http://localhost:4000/venues/1
```

### 在浏览器中测试

访问：
- http://localhost:4000/venues - 获取场地列表
- http://localhost:4000/venues/1 - 获取ID为1的场地详情
- http://localhost:4000/health - 健康检查

## 快速查看命令

```bash
# 查看数据（最简单）
cd Server/api && npm run view-data

# 查看场地列表（网页）
# 访问 http://localhost:3000/admin/venues

# 查看数据统计（网页）
# 访问 http://localhost:3000/admin/data
```

## 注意事项

1. **确保数据库连接正常**
   - 检查 `.env` 文件中的 `DATABASE_URL` 或数据库配置
   - 确保数据库服务正在运行

2. **如果使用 Railway 数据库**
   - 需要从 Railway 控制台获取 `DATABASE_URL`
   - 确保设置了 `DB_SSL=true`

3. **数据更新**
   - 命令行工具显示的是实时数据
   - 网页页面可能需要刷新才能看到最新数据

