# 本地「上海 + 足球」只显示 10 个场地

## 已连后端、仍然只有 10 个

页面显示「共 10 个场地」说明**当前后端所连的数据库**里只有 10 个上海足球场，31 条还没导入到这个库（或当初导入的是别的库）。数据库可以在 Railway、自建、或其它云，无所谓——只要让导入脚本往**同一个库**里写即可。

**做法：把 31 个上海足球场导入到「当前后端用的数据库」**

1. **确认当前库连接串**  
   打开 `Server/api/.env`，看里面的 `DATABASE_URL`。确保它指向**你现在后端在用的那个数据库**（前端请求的后端连的是哪个库，这里就填哪个库的地址）。

2. **在 `Server/api` 下执行导入**：
   ```bash
   cd ~/Documents/findyusports/Server/api
   npm run import-shanghai-football
   ```
   脚本会往 `.env` 里 `DATABASE_URL` 对应的库写入 31 条上海足球场（同名会跳过）。

3. **导入完成后**  
   刷新前端，选「上海 + 足球」，应能看到 31 个场地。

若你临时想导入到**另一个库**（例如另一台服务器上的 Postgres），可以在命令行覆盖环境变量再执行，例如：  
`DATABASE_URL='postgresql://user:pass@host:5432/db' npm run import-shanghai-football`（连接串含特殊字符时用单引号包起来）。

---

## 原因（未连生产时）

- 前端（localhost:3000）的场地列表请求会发到 **当前配置的后端**。
- 未配置时默认用 `http://localhost:4000`，即**本地 Nest 后端**。
- 本地后端使用的数据库由 `Server/api/.env` 里的 `DATABASE_URL` 决定。
- 若**导入脚本**当时连接的是 A 库（例如生产 Railway），而**本地后端**连接的是 B 库（例如本机 PostgreSQL），则 A 里有 31 个上海足球场，B 里只有你之前添加的约 10 条，所以列表只会显示 10 个。

## 解决方式（二选一）

### 方案一：本地前端连「已有 31 条数据的后端」

若 31 条已经导入到某个后端对应的库里，只需让本地前端请求那个后端：

1. 在 `Web/webapp` 下创建或编辑 `.env.local`，设置：
   ```bash
   NEXT_PUBLIC_API_BASE=你的后端地址
   ```
   （例如 `https://你的应用.up.railway.app` 或 `http://你的服务器:4000`）
2. 重启前端开发服务（`npm run dev`）。
3. 再打开「上海 + 足球」：列表会显示该后端库里的场地。

注意：登录、收藏等会作用在该后端的数据上。

### 方案二：让本地后端用「有 31 条」的那个库

1. 确认导入脚本当时用的数据库地址（例如生产库的 `DATABASE_URL`）。
2. 在 `Server/api/.env` 里把 `DATABASE_URL` 设为**同一个**地址。
3. 启动本地后端（`npm run start:dev`），不要改前端的 `NEXT_PUBLIC_API_BASE`（继续用 `http://localhost:4000`）。
4. 此时本地前端会从该库拉数据，即可看到 31 个上海足球场。

若你希望 31 条只进本地库、不进生产库，则：

1. 在 `Server/api/.env` 里保证 `DATABASE_URL` 指向**本地后端要用的那个库**。
2. 在该目录下执行：`npm run import-shanghai-football`。
3. 脚本会把 31 条写入当前 `DATABASE_URL` 对应的库；再刷新前端即可。

---

总结：要让「上海 + 足球」显示 31 个，必须保证**前端请求的那个后端**所连的数据库里就有这 31 条（用方案一或方案二统一到同一个库即可）。
