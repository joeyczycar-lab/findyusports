# 检查 Railway OSS 环境变量

## 快速检查清单

### ✅ 检查项 1：确认服务

- [ ] 我配置环境变量的服务是 **API 服务**（后端服务）
- [ ] 不是 PostgreSQL 数据库服务

### ✅ 检查项 2：检查变量是否存在

在 Railway API 服务的 Variables 中，确认以下变量是否存在：

- [ ] `OSS_ACCESS_KEY_ID`
- [ ] `OSS_ACCESS_KEY_SECRET`
- [ ] `OSS_REGION`
- [ ] `OSS_BUCKET`

### ✅ 检查项 3：检查变量值

如果变量存在，检查：

- [ ] `OSS_ACCESS_KEY_ID` 的值是否正确（不是空值）
- [ ] `OSS_ACCESS_KEY_SECRET` 的值是否正确（不是空值）
- [ ] `OSS_REGION` 的值是否正确（如：`oss-cn-hangzhou`）
- [ ] `OSS_BUCKET` 的值是否正确（如：`venues-images`）
- [ ] 所有变量值前后没有多余的空格

### ✅ 检查项 4：重新部署

- [ ] 已点击 "Settings" → "Redeploy" 重新部署服务
- [ ] 等待部署完成（1-2 分钟）
- [ ] 已测试图片上传功能

## 常见问题

### Q: 变量存在但还是提示"OSS未配置"

**A:** 可能的原因：
1. 变量值有空格或格式问题
2. 服务没有重新部署
3. 变量配置在了错误的服务上

**解决方法：**
1. 删除所有 OSS 相关变量
2. 重新添加，确保值正确且没有空格
3. 手动重新部署服务

### Q: 如何确认变量是否生效？

**A:** 查看 Railway 部署日志：
1. 在 Railway API 服务页面，点击 "Deployments" 标签
2. 查看最新的部署日志
3. 如果看到 OSS 相关的错误，说明配置有问题
4. 如果没有错误，说明配置可能正确，但需要确认变量值

### Q: 变量配置在哪个服务上？

**A:** 必须在 **API 服务**（后端服务）上配置，不是在数据库服务上。

## 如果所有检查都通过但仍然不行

请提供：
1. Railway Variables 的截图（隐藏敏感信息）
2. Railway 部署日志中的相关错误
3. 浏览器控制台中的完整错误信息
